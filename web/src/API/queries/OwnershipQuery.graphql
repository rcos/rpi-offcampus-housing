# Queries
query GetOwnershipsForLandlord($landlord_id: String!) {
  getOwnershipsForLandlord(landlord_id:$landlord_id) {
    ...OwnershipCollectionAPIResponseFields
  }
}

query GetOwnership($ownership_id: String!) {
  getOwnership(_id:$ownership_id) {
    ...OwnershipAPIResponseFields
  }
}

query GetOwnershipsInReview {
  getOwnershipsInReview {
    ...OwnershipCollectionAPIResponseFields
  }
}

# Mutations
mutation AddOwnershipDocuments (
  $ownership_id: String!,
  $documents_info: [OwnershipDocumentInput!]!
) {
  addOwnershipDocuments(ownership_id: $ownership_id, documents_info: $documents_info) {
    ...OwnershipAPIResponseFields
  }
}

mutation CreateOwnership(
  $landlord_id: String!,
  $address_line: String!,
  $address_line_2: String!,
  $city: String!,
  $state: String!,
  $zip_code: String!
) {
  createOwnershipReview(
    landlord_id:$landlord_id,
    address_line:$address_line,
    address_line_2:$address_line_2,
    city:$city,
    state:$state,
    zip_code:$zip_code
  ) {
    ...OwnershipAPIResponseFields
  }
}

# Fragments
fragment OwnershipAPIResponseFields on OwnershipAPIResponse {
  success
  error
  data {
    _id
    property_id
    landlord_id
    date_submitted
    status
    ownership_documents {
      ...ownershipDocumentFields
    }
  }
}

fragment OwnershipCollectionAPIResponseFields on OwnershipCollectionAPIResponse {
  success
  error
  data {
    ownerships {
      _id
      property_id
      property_doc {
        _id
        location
        sq_ft
        landlord
      }
      landlord_id
      landlord_doc {
        _id
        first_name
        last_name
        email
        phone_number
      }
      date_submitted
      status
      ownership_documents {
        ...ownershipDocumentFields
      }
    }
  }
}

fragment ownershipDocumentFields on OwnershipDocument {
  s3_doc_key
  format
  date_uploaded
}